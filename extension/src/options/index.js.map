{"version":3,"file":"src/options/index.js","mappings":";;;;;AAAA;AAEA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;;AACA;;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAGA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAGA","sources":["webpack://canvas-plus/./src/options/index.js"],"sourcesContent":["let $customs = $('#customs');\r\n\r\nchrome.runtime.sendMessage({\r\n  action: 'GET'\r\n}, state => {\r\n  console.log('Got state', state);\r\n  let tabs = document.querySelector('.tabs');\r\n  if (state.instances.length === 0) return;\r\n\r\n  let currentInstance = state[state.instances[0]];\r\n  let currentInstanceIndex = 0;\r\n\r\n  //   courseIds: [],\r\n  // tabsEnabled: true,\r\n  // gradesEnabled: true,\r\n  // gradeTagsEnabled: true\r\n  console.log(currentInstance);\r\n\r\n  // add tabs\r\n  for (let i = 0; i < state.instances.length; i++) {\r\n    let instance = state.instances[i];\r\n    const tab = document.createElement('li');\r\n    tab.className = 'tab col s3';\r\n    tab.innerHTML = `<a href=\"#${instance}\">${instance}</a>`;\r\n\r\n    tab.addEventListener('click', () => {\r\n      currentInstance = state[instance];\r\n      currentInstanceIndex = i;\r\n      initialize();\r\n    })\r\n    tabs.append(tab);\r\n  }\r\n  tabs = M.Tabs.init(document.querySelector('.tabs'), {});\r\n\r\n\r\n  var $grades = $('#grades')\r\n  var $gradeTags = $('#grade-tags')\r\n\r\n  function initialize() {\r\n    $grades.attr(\"checked\", currentInstance.settings.gradesEnabled);\r\n    $gradeTags.attr(\"checked\", currentInstance.settings.gradeTagsEnabled);\r\n\r\n    initializeTabs();\r\n    initializeCustomLinks();\r\n  }\r\n\r\n  /*\r\n  ===========================\r\n  Tabs\r\n  ===========================\r\n   */\r\n  var $tabs = $('#tabs');\r\n  var $orderTabs = $('#order-tabs');\r\n\r\n  function initializeTabs() {\r\n    $tabs.attr(\"checked\", currentInstance.settings.tabsEnabled);\r\n\r\n    function populateOrder() {\r\n      $orderTabs.html(\"\"); // clear html\r\n      currentInstance.courseIds.forEach((courseId, i) => {\r\n        let $course = $(`<div class=\"order-course\">\r\n                    <div>\r\n                        <i class=\"up material-icons\">arrow_drop_up</i>\r\n                        <i class=\"down material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div class=\"text\">${currentInstance.courses[courseId].name}</div>\r\n                    <label>\r\n                      <input type=\"checkbox\" class=\"hide\"/>\r\n                      <span>Hide</span>\r\n                    </label>\r\n                    </div>`)\r\n        $orderTabs.append($course);\r\n\r\n        let $up = $course.find('.up');\r\n        let $down = $course.find('.down');\r\n        if (i !== 0)\r\n          $up.on('click', () => {\r\n            currentInstance.courseIds.splice(i, 1);\r\n            currentInstance.courseIds.splice(i - 1, 0, courseId);\r\n            populateOrder();\r\n          })\r\n        if (i !== currentInstance.courseIds.length - 1)\r\n          $down.on('click', () => {\r\n            currentInstance.courseIds.splice(i, 1);\r\n            currentInstance.courseIds.splice(i + 1, 0, courseId);\r\n            populateOrder();\r\n          })\r\n\r\n        let $hide = $course.find('.hide');\r\n        $hide.on('change', () => {\r\n          currentInstance.courseIds.splice(i, 1);\r\n          currentInstance.hiddenCourseIds.push(courseId);\r\n          populateOrder();\r\n        })\r\n      });\r\n\r\n      currentInstance.hiddenCourseIds.forEach((courseId, i) => {\r\n        let $hiddenCourse = $(`<div class=\"order-course\">\r\n                    <div class=\"text\">${currentInstance.courses[courseId].name}</div>\r\n                    <label>\r\n                      <input type=\"checkbox\" class=\"hide\" checked=\"checked\"/>\r\n                      <span>Hide</span>\r\n                    </label>\r\n                    </div>`)\r\n        $orderTabs.append($hiddenCourse);\r\n\r\n        let $hide = $hiddenCourse.find('.hide');\r\n        $hide.on('change', () => {\r\n          currentInstance.hiddenCourseIds.splice(i, 1);\r\n          currentInstance.courseIds.push(courseId);\r\n          populateOrder();\r\n        })\r\n      });\r\n    }\r\n\r\n    populateOrder();\r\n  }\r\n\r\n  // listeners\r\n  $tabs.on('input', function () {\r\n    currentInstance.settings.tabsEnabled = $tabs.is(\":checked\");\r\n    console.log('Updated value', $tabs.is(\":checked\"));\r\n  })\r\n\r\n  /*\r\n  ===========================\r\n  Dashboard\r\n  ===========================\r\n   */\r\n  $grades.on('input', function () {\r\n    currentInstance.settings.gradesEnabled = $grades.is(\":checked\");\r\n    console.log('Updated value', $grades.is(\":checked\"));\r\n  })\r\n\r\n  $gradeTags.on('input', function () {\r\n    currentInstance.settings.gradeTagsEnabled = $gradeTags.is(\":checked\");\r\n    console.log('Updated value', $grades.is(\":checked\"));\r\n  });\r\n\r\n  $('#update-button').on('click', () => {\r\n    state[state.instances[currentInstanceIndex]] = currentInstance;\r\n    chrome.runtime.sendMessage({\r\n      action: 'SET',\r\n      state: state\r\n    }, () => {\r\n      console.log('Successfully Updated');\r\n    })\r\n  });\r\n\r\n  $('#cancel-button').on('click', () => {\r\n    location.reload();\r\n  });\r\n\r\n  /*\r\n  ===========================\r\n  Custom Links\r\n  ===========================\r\n   */\r\n  function initializeCustomLinks() {\r\n    $customs.html(\"\"); // clear html\r\n    for (let courseId of currentInstance.courseIds) {\r\n      let id = courseId;\r\n      let course = currentInstance.courses[courseId];\r\n      console.log('Setting up course with id ' + id, course);\r\n      let $label = $('<div><h6>' + course.name + '</h6></div>');\r\n      let $input = $('<input type=\"text\" placeholder=\"http://...\"/>').val(course.custom);\r\n      $label.append($input);\r\n      $customs.append($label);\r\n\r\n      $input.on('input', function () {\r\n        currentInstance.courses[courseId].custom = $input.val();\r\n        console.log(currentInstance.courses[courseId].custom);\r\n      })\r\n    }\r\n  }\r\n\r\n  initialize();\r\n})\r\n\r\n// chrome.storage.sync.get({\r\n// })"],"names":[],"sourceRoot":""}